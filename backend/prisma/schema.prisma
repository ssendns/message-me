generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int       @id @default(autoincrement())
  username  String    @unique
  password  String
  messagesSent     Message[] @relation("MessagesSent")
  messagesReceived Message[] @relation("MessagesReceived")
}

model Message {
  id        Int      @id @default(autoincrement())
  from      User?    @relation("MessagesSent", fields: [fromId], references: [id], onDelete: SetNull)
  fromId    Int?
  to        User?    @relation("MessagesReceived", fields: [toId], references: [id], onDelete: SetNull)
  toId      Int?
  content   String    @default("")
  imageUrl  String? 
  imagePublicId String?
  createdAt DateTime @default(now())
  updatedAt DateTime? @updatedAt
  edited Boolean @default(false)
  hasUnread  Boolean  @default(true)
}
